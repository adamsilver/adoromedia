<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<title>Sliders test</title>
		<link rel="stylesheet" href="facets.css" type="text/css" />
		<script type="text/javascript" src="jquery-1.3.2.min.js"></script>
		<script type="text/javascript" src="jquery-ui-1.7.2.custom.min.js"></script>
		<script type="text/javascript">
			$(document).ready(function(){
								
				if(typeof EJ !== "object") EJ = {};
				
				EJ.FacetControlMyStyle = new (function(){
					var container = document.getElementById("facetControlMyStyle");
					var slider = $(container).find("div.slider")[0] || null;
					var sliderInner = $(container).find("div.sliderInner")[0] || null;
					$(container).append('<p class="indicator"></p>')
					var indicator = $(container).find("p.indicator")[0] || null;						
					
					if(!container || !slider || !sliderInner) return;
					
					var config = {
						sliderHandleClass: "sliderHandle",
						sliderMaxValue: 4,
						sliderMaxWidth: 232
					}
					
					var state = {
						currentValue: 0
					}
					
					$(slider).slider( { 
						handle: "."+config.sliderHandleClass,
						min: 0, 
						max: config.sliderMaxValue,
						startValue: state.currentValue,
						steps: 4,
						slide: function(e, ui){
							setCurrentValue(ui.value);	
							setBackgroundWidth();	
						},
						change: function(e, ui) {
							indicator.innerHTML = ui.value;
						}
					});			
					
					setBackgroundWidth();
					
					function setCurrentValue(newValue) {
						state.currentValue = newValue;
					}
					
					function setBackgroundWidth() {
						var width = Math.ceil((config.sliderMaxWidth / config.sliderMaxValue) * state.currentValue) + "px";
						$(sliderInner).css("width", width);
					}					
				});			
				
				EJ.FacetControlPrice = new (function(){
					var container = document.getElementById("facetControlPrice");
					var slider = $(container).find("div.slider")[0] || null;
					var sliderInner = $(container).find("div.sliderInner")[0] || null;
					$(container).append('<p class="indicator"></p>')
					var indicator = $(container).find("p.indicator")[0] || null;					
					
					if(!container || !slider || !sliderInner) return;
					
					var config = {
						sliderHandleClass: "sliderHandle",
						sliderMaxValue: 2000,
						sliderMaxWidth: 176
					}
					
					var state = {
						currentValue: 0
					}
					
					$(slider).slider( { 
						handle: "."+config.sliderHandleClass,
						min: 0, 
						max: config.sliderMaxValue,
						startValue: state.currentValue,
						steps: 200,
						slide: function(e, ui){
							setCurrentValue(ui.value);		
							setBackgroundWidth();	
						},
						change: function(e, ui) {
							indicator.innerHTML = ui.value;
						}
					});			
					
					setBackgroundWidth();
					
					function setCurrentValue(newValue) {
						state.currentValue = newValue;
					}
					
					function setBackgroundWidth() {
						var width = Math.ceil((config.sliderMaxWidth / config.sliderMaxValue) * state.currentValue) + "px";
						$(sliderInner).css("width", width);
					}					
				});
				
				EJ.FacetControlCarat = new (function(){
					var container = document.getElementById("facetControlCarat");
					var slider = $(container).find("div.slider")[0] || null;
					var sliderInner = $(container).find("div.sliderInner")[0] || null;
					$(container).append('<p class="indicator"></p>');
					var indicator = $(container).find("p.indicator")[0] || null;
					
					
					if(!container || !slider || !sliderInner) return;
					
					var config = {
						sliderHandleClass: "sliderHandle",
						sliderMaxValue: 6,
						sliderMaxWidth: 250
					}
					
					var state = {
						currentValue: 0
					}
					
					$(slider).slider( { 
						orientation: "vertical",
						handle: "."+config.sliderHandleClass,
						min: 0, 
						max: config.sliderMaxValue,
						startValue: state.currentValue,
						steps: 6,
						slide: function(e, ui){
							var val = ui.value;
							setCurrentValue(val);		
							setBackgroundHeight();	
						},
						change: function(e, ui) {
							indicator.innerHTML = config.sliderMaxValue - ui.value;
						}
					});

					
					setBackgroundHeight();
					
					$(container).find("div.labels a").bind("click",function(){
						var num = parseInt($(this).find("span")[0].innerHTML);
						$(slider).slider("value",num);
						return false;
					});
					
					
					function setCurrentValue(newValue) {
						state.currentValue = newValue;
					}
					
					function setBackgroundHeight() {
						var height = Math.ceil((config.sliderMaxWidth / config.sliderMaxValue) * state.currentValue) + "px";
						$(sliderInner).css("height", height);
					}		
				});		
				
				EJ.FacetControlMaterial = new (function(){
					var container = document.getElementById("facetControlMaterial");
					$(container).append('<p class="indicator"></p>');
					var indicator = $(container).find("p.indicator")[0] || null;
					
					var state = {currentSelection: null};
					
					$(container).find("a").bind("click", material_onClick);
					
					function material_onClick() {
						setCurrentSelection(this.innerHTML);
						updateIndicator();
						updateStyling();
						$(this).addClass("selected");
						return false;
					}
					
					function setCurrentSelection(value) {
						state.currentSelection = value;
					}
					
					function updateIndicator() {
						indicator.innerHTML = state.currentSelection;
					}
					
					function updateStyling() {
						$(container).find("a").removeClass("selected");
					}
					
					updateIndicator();
					
				});					
				
				EJ.FacetControlShape = new (function(){
					var container = document.getElementById("facetControlShape");
					$(container).append('<p class="indicator"></p>');
					var indicator = $(container).find("p.indicator")[0] || null;
					
					var state = {currentSelection: null};
					
					$(container).find("a").bind("click", material_onClick);
					
					function material_onClick() {
						setCurrentSelection(this.innerHTML);
						updateIndicator();
						updateStyling();
						$(this).addClass("selected");
						return false;
					}
					
					function setCurrentSelection(value) {
						state.currentSelection = value;
					}
					
					function updateIndicator() {
						indicator.innerHTML = state.currentSelection;
					}
					
					function updateStyling() {
						$(container).find("a").removeClass("selected");
					}
					
					updateIndicator();
					
				});					
						
			
			
				
				
			});
		</script>

	</head>
	<body>
		<div id="container">

			<h1>Sliders test</h1>
			
			<div id="facetControlMyStyle">
				<h2>My style</h2>
				
				<div class="labels">
					<p class="sleek">Sleek <span>and chic</span></p>
					<p class="dazzling">Dazzling <span>Indulgence</span></p>
				</div>
				
				<div class="slider">
					<div class="sliderInner"></div>
				</div>
			</div>
			
			<div id="facetControlPrice">
				<h2>Price</h2>
				
				<div class="slider">
					<div class="sliderInner"></div>
				</div>						
				
				<div class="labels">
					<p class="less">Less than <span>&#163;500</span></p>
					<p class="more">More than <span>&#163;2000</span></p>
				</div>
			</div>
			
			<div id="facetControlCarat">
				<h2>Carat</h2>
				
				<div class="labels">
					<p class="value"><a href="#">2<span>6</span></a></p>
					<p class="value"><a href="#">1.5<span>5</span></a></p>
					<p class="value"><a href="#">1<span>4</span></a></p>
					<p class="value"><a href="#">0.75<span>3</span></a></p>
					<p class="value"><a href="#">0.5<span>2</span></a></p>
					<p class="value"><a href="#">0.3<span>1</span></a></p>
					<p class="value"><a href="#">0.25<span>0</span></a></p>
				</div>
				
				<div class="slider">
					<div class="sliderInner"></div>
				</div>	
			</div>
			
			<div id="facetControlMaterial">
				<h2>Ring material</h2>
				<ul>
					<li><a href="#">Gold</a></li>
					<li><a href="#">White Gold</a></li>
					<li><a href="#">Platinum</a></li>
				</ul>
			</div>
			
			<div id="facetControlShape">
				<h2>Stone shape</h2>
				<ul>
					<li><a href="#">Brilliant</a></li>
					<li><a href="#">Princess</a></li>
					<li><a href="#">Oval</a></li>
					<li><a href="#">Octagon</a></li>
					<li><a href="#">Emerald</a></li>
					<li><a href="#">Baguette</a></li>
				</ul>
			</div>					

		</div>
	</body>
</html>