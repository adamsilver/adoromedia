<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Sum test</title>
        <script type="text/javascript" src="../../../jsunit/app/jsUnitCore.js"></script>
		<script type="text/javascript" src="../../../jsunit/app/jsUnitMockTimeout.js"></script>		
		<script type="text/javascript">
			function showProgress(status) {
			  status.message = "Loading";
			  for (var time = 1000; time <= 3000; time += 1000) {
				// Append a '.' to the message every second for 3 secs.
				setTimeout(function() {
				  status.message += ".";
				}, time);
			  }
			  setTimeout(function() {
				// Special case for the 4th second.
				status.message = "Done";
			  }, 4000);
			}	
		</script>
		<script type="text/javascript">
			<!--
			
			function testUpdatesStatusMessageOverFourSeconds() {
				Clock.reset(); // Clear any existing timeout functions on the event queue.
				var  status = {};
				showProgress(status); // Call our function.
				assertEquals("Loading", status.message);
				Clock.tick(2000); // Call any functions on the event queue that have
				// been scheduled for the first two seconds.
				assertEquals("Loading..",  status.message);
				Clock.tick(2000); // Same thing again, for the next two seconds.
				assertEquals("Done", status.message);
			}	
			
			-->
		</script>
    </head>    
    <body>
    </body>
</html>
