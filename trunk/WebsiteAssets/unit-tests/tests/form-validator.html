<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JsUnit Test Suite</title>
        <script type="text/javascript" src="../jsunit/app/jsUnitCore.js"></script>
		
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
        <script type="text/javascript" src="../../javascript/Adoro/Adoro.FormValidator3.js"></script>
        <script type="text/javascript">
			
	    
            /*
            - test that public methods exist?
            - addValidator
                - test that if we provide the correct arguments to it
                - test that if we provide no arguments we dont add validator
                - test that if we dont provide a set of rules dont add validator
                - test that a rule has a method and a message or not a message?
                - if all arguments are successful then add validator and check that validators length is increased by 1???
            - test when the form is submitted that it runs all the validators
                - test that the errors length i expect
                - fill in the fields correctly and test errors length is 0???
            - test a contextual submit
                - force a click event on particular submit that is contextual
                - check that the errors length is equal to the errors i expect when adding validators to that contextual group
            
            */
	    
            // how does this work when we need to do this when dom is ready?
            function testSubmitValidateWithErrors() {
                var form = document.getElementById("form1");
                var fv = new Adoro.FormValidator(form);
                fv.addValidator("username",[{
                    method: function() {
                        return false;
                    },
                    message: "Failed"
                }]);
                document.getElementById("primarySubmit").click();
                // i need to check the the amount of errors is 1
                //assertEquals(1, fv.getErrors().length);???
                
            }
        
            function testAdoroFormValidatorExists() {
                assertNotNull("Reference is not null", Adoro.FormValidator);  
            }
	    
            // what should i do with a class that has no arguments?
            function testNoArguments() {
                // when no arguments return null;
               // var fv = new Adoro.FormValidator();
                //assertUndefined("no arguments returns null", fv.addValidator);
            }
            
			
            function testAddValidatorWhenNoFormNode_dontAddValidator() {
                var fv = new Adoro.FormValidator();
                fv.addValidator("username", [{
                    method: function() {
                        return true
                    },
                    message: "helo there error"
                }]);
                //assertEquals(0, fv.getValidators().length);
            }
			
	    function testAddValidatorWhenNoRules_dontAddValidator() {
            var formNode = document.getElementById("form1");
            var fv = new Adoro.FormValidator(formNode);
            fv.addValidator("username");
            
            //assertEquals(0, fv.getValidators().length);
	    }
	    
	    function testAddValidatorWhenEmptyRules_dontAddValidator() {
            var formNode = document.getElementById("form1");
            var fv = new Adoro.FormValidator(formNode);
            fv.addValidator("username", []);
            //assertEquals(0, fv.getValidators().length);
	    }	

	    function testAddValidatorWhenRulesAreEmptyObjects_dontAddValidator() {
            var formNode = document.getElementById("form1");
            var fv = new Adoro.FormValidator(formNode);
            fv.addValidator("username", [{}]);
            //assertEquals(0, fv.getValidators().length);
	    }	
            
        </script>
    </head>
    
    <body>
        <h1>Form Validator</h1>
		
		<form id="form1">
		    <input name="username" />
            
            <input type="submit" id="primarySubmit" name="primarySubmit" value="Primary submit" />
		</form>
		
    </body>
</html>
