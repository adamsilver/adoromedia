<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JsUnit Test Suite</title>
        <script type="text/javascript" src="../jsunit/app/jsUnitCore.js"></script>
		<script type="text/javascript" src="../jsmock/jsmock.js"></script>
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.js"></script>
       
		<script type="text/javascript">
			function Worker() {
				this.doSomething = function() {}
			}
		</script>
		<script type="text/javascript">
		
			<!-- basic example -->
			function test_basic_mock() {
				var mock = new MockControl();
				var workerMock = mock.createMock(Worker);
				workerMock.expects().doSomething().andReturn("foo");
				
				var result = workerMock.doSomething();
				
				assertEquals('foo', result);
				mock.verify();
			}
		</script>
		
		<script type="text/javascript">
			function ClassA(obj) {
				this.getValue = function() {
					return obj.doSomething();
				}
			}
			
			function ClassB(theName) {
				this.doSomething = function() {
					return theName;
				}
			}
		</script>
		
		<script type="text/javascript">
			
			function test_without_mock() {
				var objb = new ClassB("adam"); // bad because we have to kinda test objb
				var obja = new ClassA(objb);				
				var result = obja.getValue();				
				assertEquals("", result, "adam");
			}
			
			function test_with_mock() {
				var mock = new MockControl();
				var objbMock = mock.createMock(ClassB);
				objbMock.expects(2).doSomething().andReturn("adam");
				var obja = new ClassA(objbMock);
				var result = obja.getValue();
				mock.verify();
				assertEquals("", result, "adam");
			}
			
		</script>
		
    </head>
    
    <body>

    </body>
</html>
