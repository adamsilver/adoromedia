<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Salmon.Global.MiniBasket.ItemsList</title>
        <script type="text/javascript" src="../../../jsunit/app/jsUnitCore.js"></script>
		
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.js"></script>
        <script type="text/javascript" src="../../../../javascript/Salmon/Salmon.Global.MiniBasket.ItemsList.js"></script>
        
		<style type="text/css">
			.hide {
				display: none;
			}
		</style>
		
		<script type="text/javascript">
			<!--
			
			function setUp() {
			}
			
			function test_itemsList_exists() {
				assertNotNull("", typeof Salmon.Global.MiniBasket.ItemsList);			
			}
			
			function test_updateHtml_invalidArg_dontUpdate() {
				var html = $("#miniShoppingBag div.itemsList").html();
				Salmon.Global.MiniBasket.ItemsList.updateHtml();
				var html2 = $("#miniShoppingBag div.itemsList").html();
				assertEquals("Html should not have been updated", html, html2);
			}
			
			function test_updateHtml_validArg_updatedCorrectly() {
				var newHtml = '<div>Yo</div>';
				Salmon.Global.MiniBasket.ItemsList.updateHtml(newHtml);
				var html = $("#miniShoppingBag div.itemsList").html();
				assertEquals("Html should be updated", html, newHtml);
			}
			
			function test_defaultState_hidden() {
				var state = $("#miniShoppingBag div.itemsList").css("display");
				var hasHideCssClass = $("#miniShoppingBag div.itemsList").hasClass("hide");
				assertTrue("Component has hide css class", hasHideCssClass);
				assertEquals("Component has display none property", state, "none");				
			}
			
			function test_onMouseEnter_showing() {
				$("#miniShoppingBag").trigger("mouseenter");
				var hasHideCssClass = $("#miniShoppingBag div.itemsList").hasClass("hide");
				var state = $("#miniShoppingBag div.itemsList").css("display");
				assertFalse("Component has hide css class", hasHideCssClass);
				assertEquals("Component has display none property", state, "block");
				$("#miniShoppingBag").trigger("mouseleave");
			}
			
			function test_onMouseLeave_hidden() {
				$("#miniShoppingBag").trigger("mouseenter");
				$("#miniShoppingBag").trigger("mouseleave");
				var hasHideCssClass = $("#miniShoppingBag div.itemsList").hasClass("hide");
				var state = $("#miniShoppingBag div.itemsList").css("display");
				assertTrue("Component has hide css class", hasHideCssClass);
				assertEquals("Component has display none property", state, "none");
			}
			
			-->
		</script>
    </head>    
    <body>		
		<div id="miniShoppingBag">
			<div class="summary">
				<p class="title">Mini basket</p>
				<p class="summary">You have x items in your basket. Total £xx.xx</p>
				<a href="#" class="checkout">Checkout</a>
				<a href="#">View basket</a>
			</div>
			<div class="itemsList hide">
				<div>
					<p class="title">Your basket contains:</p>
					<div class="item">
						<img height="70" border="0" width="70" alt=" " src="">
						<p class="productTitle"></p>
						<p class="price">£29.99</p>
					</div>
					<p class="totalOrder">
						Total order value: 
					</p>
					<p class="deliveryMessage">This is not the real 'Delivery message'</p>
					<a href="" class="checkout">Checkout</a>
				</div>
			</div>
		</div>		
		
    </body>
</html>
