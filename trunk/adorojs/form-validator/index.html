<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
	<head>
		<script type="text/javascript" src="jquery-1.3.2.js"></script>
		<script type="text/javascript" src="jquery.color.js"></script>
		<script type="text/javascript" src="Adoro.FormRules.js"></script>
		<script type="text/javascript" src="Adoro.FormValidator3.js"></script>
		<script type="text/javascript">
			
			var ArgosFormValidator = function(formNode) {
				var errorSummary = document.getElementById("errorContainer");
				var docTitle = document.title;
				
				return new Adoro.FormValidator(formNode, {
					onClearErrors: function(validators) {
						restoreErrorSummaryZone();
						cleanFields(validators);
					},
					onFormError: function(errors) {
						showErrorSummaryZone(errors);
					},
					onFieldValidate: function() {
						var width = $(this).width();
						//console.log(width);
						$(this).animate({"width":"200px"},{});
						$(this).animate({"width": width+"px"},{});
					},
					onFieldError: function() {
						$(this).css("backgroundColor", "#f00");
					},
					onFieldSuccess: function() {
						$(this).css("backgroundColor", "#31cf2d");
					}
				});
				
				function cleanFields(validators) {				
					for(var i = 0; i < validators.length; i++) {
						cleanField(validators[i].field);
					}
				}
				
				function cleanField(field) {
					$(field).css("backgroundColor", "#fff");
				}
				
				function restoreErrorSummaryZone() {
					if(!errorSummary) return;
					document.title = docTitle;
					errorSummary.innerHTML = '';
				}
				
				function showErrorSummaryZone(errors) {
					if(!errorSummary) return;
					var html = '<ul>';
					for(var i = 0; i < errors.length; i++) {
						html+=	'<li>';
						html+=		'<a href="#'+errors[i].id+'">'+	errors[i].message + '</a>';
						html+=	'</li>';
					}
					html +='</ul>';
					errorSummary.innerHTML = html;
					window.scrollTo(0, $(errorSummary).position().top);
				}
			}
			
			$(document).ready(function() {
				var formNode = $("form")[0];
				var fv = new ArgosFormValidator(formNode);
				fv.addValidator("username",[{
						method: Adoro.FormRules.notEmpty,
						message: "The error message for username"
					},{
						method: Adoro.FormRules.isLength,
						message: "The username should have a length of 3",
						params: {length: 3}
					}]
				);

				fv.addValidator("password",[{
						method: Adoro.FormRules.notEmpty,
						message: "The error message for password"
					}]
				);	
				
				fv.addContextualGroup("submitForm2", ["username"]);
				
			});
		</script>
	</head>
	<body>
		<h1>Argos Form Validator</h1>
		<div id="container">
			
			<div id="errorContainer">
			</div>
			
			<form method="post" action="index.html">
				<div class="field">
					<div class="indicator">
						<label>YO</label>
					</div>
					<div class="singleInput">
						<input type="text" name="username" />
					</div>
				</div>
				<input type="submit" name="submitForm2" id="submitForm2" value="validate username only"/>
				<div class="field">
					<div class="indicator">
						<label>Password label but you don't need one</label>
					</div>
					<div class="singleInput">
						<input type="text" name="password" />
					</div>
				</div>
				<input type="submit" name="submitForm" />
			</form>
			
		</div>
	</body>
</html>